from restapi.connectors.celery import CeleryExt, send_errors_by_email

from restapi.utilities.logs import log
from restapi.connectors import {{auth}}


@CeleryExt.celery_app.task(bind=True, name="{{name}}")
@send_errors_by_email
def {{name}}(self):
    with CeleryExt.app.app_context():

        log.info("Task ID: {}", self.request.id)

        db = {{auth}}.get_instance()

        log.info("Task executed!")

        return "Task executed!"
