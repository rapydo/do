# -*- coding: utf-8 -*-

"""
Graph DB abstraction from neo4j server.
These are custom models!

VERY IMPORTANT!
Imports and models have to be defined/used AFTER normal Graphdb connection.
"""

from neomodel import (
    StringProperty,
    IntegerProperty,
    DateProperty,
    DateTimeProperty,
    JSONProperty,
    ArrayProperty,
    FloatProperty,
    BooleanProperty,
    AliasProperty,
    # UniqueIdProperty

    StructuredNode,
    StructuredRel,

    RelationshipTo,
    RelationshipFrom,

    ZeroOrMore,
    OneOrMore
)

from restapi.connectors.neo4j.types import IdentifiedNode, TimestampedNode

# from restapi.utilities.logs import log


# Extension of User model
class UserCustom(IdentifiedNode):
    pass


{% if not extend -%}
class RelationTest(StructuredRel):
    pp = StringProperty()


class JustATest(TimestampedNode):
    p_str = StringProperty(required=True)
    p_int = IntegerProperty()
    p_arr = ArrayProperty()
    p_json = JSONProperty()
    p_float = FloatProperty()
    p_date = DateProperty()
    p_dt = DateTimeProperty()
    p_bool = BooleanProperty()
    p_alias = AliasProperty()

    test1 = RelationshipFrom(
        'User', 'TEST', cardinality=ZeroOrMore, model=RelationTest)

    test2 = RelationshipFrom(
        'User', 'TEST2', cardinality=ZeroOrMore, model=RelationTest)
{% endif -%}